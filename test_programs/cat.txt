.data
in_addr: 0x09
out_addr: 0x10

.text
_start:
	; тут косвенная, тк нам надо прочитать с адреса, который лежит по адресу метки in_addr
	lhi r1, in_addr			; in_addr[31..12] -> r1[31..12]
	lli r1, in_addr			; in_addr[11..0] -> r1[11..0]
	lw r1, r1				; mem[in_addr] -> r1
	
	; тут косвенная, тк нам надо прочитать с адреса, который лежит по адресу метки out_addr
	lhi r2, out_addr		; out_addr[31..12] -> r2[31..12]
	lli r2, out_addr		; out_addr[11..0] -> r2[11..0]
	lw r2, r2				; mem[out_addr] -> r2
	
	lw r3, r1				; mem[mem[in_addr]] -> r3. Загрузили длины строки (счетчик) в r3
	mv r4, r3				; r3 -> r4
	
loop:
	addi r4, r4, -1			; r4-1 -> r4
	beq end					; if Z=0 goto end
	
	lw r3, r1				; mem[mem[in_addr]] -> r3. Символ в r3
	sw r2, r3				; r3 -> mem[mem[out_addr]]. Вывести символ
	
	jmp loop

end:
	halt
	